---
layout: "rabbitmq"
page_title: "RabbitMQ: rabbitmq_shovel"
sidebar_current: "docs-rabbitmq-resource-shovel"
description: |-
  Creates and manages a shovel on a RabbitMQ server.
---

# rabbitmq\_shovel

The ``rabbitmq_shovel`` resource creates and manages a dynamic shovel.

## Example Usage

```hcl
resource "rabbitmq_vhost" "test" {
    name = "test"
}

resource "rabbitmq_exchange" "test" {
    name = "test_exchange"
    vhost = "${rabbitmq_vhost.test.name}"
    settings {
        type = "fanout"
        durable = false
        auto_delete = true
    }
}

resource "rabbitmq_queue" "test" {
	name = "test_queue"
	vhost = "${rabbitmq_vhost.test.name}"
	settings {
		durable = false
		auto_delete = true
	}
}

resource "rabbitmq_shovel" "shovelTest" {
	name = "shovelTest"
	vhost = "${rabbitmq_vhost.test.name}"
	info {
		source_uri = "amqp:///test"
		source_exchange = "${rabbitmq_exchange.test.name}"
		source_exchange_key = "test"
		destination_uri = "amqp:///test"
		destination_queue = "${rabbitmq_queue.test.name}"
	}
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `info` (Block List, Min: 1, Max: 1) The settings of the shovel. (see [below for nested schema](#nestedblock--info))
- `name` (String) The name of the shovel.
- `vhost` (String) The vhost to create the resource in.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--info"></a>
### Nested Schema for `info`

Required:

- `destination_uri` (String) The amqp uri for the destination .
- `source_uri` (String) The amqp uri for the source.

Optional:

- `ack_mode` (String) Determines how the shovel should acknowledge messages. Possible values are: `on-confirm`, `on-publish` and `no-ack`.
- `add_forward_headers` (Boolean, Deprecated) Whether to add x-shovelled headers to shovelled messages.
- `delete_after` (String, Deprecated) Determines when (if ever) the shovel should delete itself. Possible values are: `never`, `queue-length` or an `integer`.
- `destination_add_forward_headers` (Boolean) Whether to add `x-shovelled` headers to shovelled messages.
- `destination_add_timestamp_header` (Boolean) Whether to add `x-shovelled-timestamp` headers to shovelled messages.
- `destination_address` (String) The exchange to which messages should be published. Either this or `destination_queue` must be specified but not both.
- `destination_application_properties` (Map of String) Application properties to set when shovelling messages. (AMQP 1.0 specific parameter)
- `destination_exchange` (String) The exchange to which messages should be published. Either this or `destination_queue` must be specified but not both.
- `destination_exchange_key` (String) The routing key when using `destination_exchange`.
- `destination_properties` (Map of String) Properties to overwrite when shovelling messages. (AMQP 1.0 specific parameter)
- `destination_protocol` (String) The protocol (`amqp091` or `amqp10`) to use when connecting to the destination.
- `destination_publish_properties` (Map of String) A map of properties to overwrite when shovelling messages.
- `destination_queue` (String) The queue to which messages should be published. Either this or `destination_exchange` must be specified but not both.
- `destination_queue_arguments` (Map of String) Arguments to use when declaring the destination queue. This is only used if `destination_queue` is specified.
- `prefetch_count` (Number, Deprecated) The maximum number of unacknowledged messages copied over a shovel at any one time.
- `reconnect_delay` (Number) The duration in seconds to reconnect to a broker after disconnected.
- `source_address` (String) The AMQP 1.0 source link address. (AMQP 1.0 specific parameter)
- `source_delete_after` (String) Determines when (if ever) the shovel should delete itself. Possible values are: `never`, `queue-length` or an integer.
- `source_exchange` (String) The exchange from which to consume. Either this or `source_queue` must be specified but not both.
- `source_exchange_key` (String) The routing key when using `source_exchange`.
- `source_prefetch_count` (Number) The maximum number of unacknowledged messages copied over a shovel at any one time.
- `source_protocol` (String) The protocol (`amqp091` or `amqp10`) to use when connecting to the source.
- `source_queue` (String) The queue from which to consume. Either this or `source_exchange` must be specified but not both.

## Import

Shovels can be imported using the `name` and `vhost`
E.g.

```
terraform import rabbitmq_shovel.test shovelTest@test
```
